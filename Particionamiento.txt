http://gpd.sip.ucm.es/rafa/docencia/nosql/Sharding.html
linux  mongod --configsvr --replSet replicaTorneoShardServer --dbpath /dataC1 --port 26001 --fork --logpath /dataC1/log --logappend

start /b mongod --port 26001 --configsvr --replSet replicaTorneoShardServer --dbpath /dataC1
start /b mongod --port 26002 --configsvr --replSet replicaTorneoShardServer --dbpath /dataC2
start /b mongod --port 26003 --configsvr --replSet replicaTorneoShardServer --dbpath /dataC3
chmod 777 -R /dataC1
Para terminar un proceso creado de esta forma hay que usar la opción --shutdown:
mongod --shutdown --dbpath cfg1 --port 26001
mongod --shutdown --dbpath cfg2 --port 26002
mongod --shutdown --dbpath cfg3 --port 26003

mongo -port 26001

conf = {_id: "replicaTorneoShardServer",
           members: [ {_id:0, host:"127.0.0.1:26001" },
                      {_id:1, host:"127.0.0.1:26002" },
                      {_id:2, host:"127.0.0.1:26003" } ] }
rs.initiate(conf)


LINUX:///mongod --shardsvr --replSet p1 --dbpath p1_1 --logpath p1_1/log --port 27100 --fork --logappend --oplogSize 50
shardsvr

start /b mongod --shardsvr --port 27006 --replSet replicaTorneoP1 --dbpath /dataP11 --oplogSize 115
start /b mongod --shardsvr --port 27007 --replSet replicaTorneoP1 --dbpath /dataP12 --oplogSize 115
start /b mongod --shardsvr --port 27008 --replSet replicaTorneoP1 --dbpath /dataP13 --oplogSize 115
start /b mongod --shardsvr --port 27009 --replSet replicaTorneoP2 --dbpath /dataP21 --oplogSize 115
start /b mongod --shardsvr --port 27010 --replSet replicaTorneoP2 --dbpath /dataP22 --oplogSize 115
start /b mongod --shardsvr --port 27011 --replSet replicaTorneoP2 --dbpath /dataP23 --oplogSize 115

5.- Creación de los procesos mongos:

start /b mongos --configdb configrs/127.0.0.1:26001,127.0.0.1:26002,127.0.0.1:26003 --logappend --logpath mongos1
start /b mongos --configdb configrs/127.0.0.1:26001,127.0.0.1:26002,127.0.0.1:26003 --logappend --logpath mongos1 --port 26601

start /b mongos --configdb configrs/127.0.0.1:26001,127.0.0.1:26002,127.0.0.1:26003
start /b mongos --configdb configrs/127.0.0.1:26001,127.0.0.1:26002,127.0.0.1:26003 --port 26601


config = {_id: "replicaTorneoP1",
           members: [ 
           {_id:0, host:"127.0.0.1:27006" },
           {_id:1, host:"127.0.0.1:27007" },
           {_id:2, host:"127.0.0.1:27008" } ] }
rs.initiate(config)
rs.addArb("127.0.0.1:27008")

config = {_id: "replicaTorneoP2",
           members: [ 
           {_id:0, host:"127.0.0.1:27009" },
           {_id:1, host:"127.0.0.1:27010" },
           {_id:2, host:"127.0.0.1:27011" } ] }
rs.initiate(config)
 rs.addArb("127.0.0.1:27011")

 se debe usar el nodo que quedo como primario

 sh.addShard("replicaTorneoP1/127.0.0.1:27007")
 sh.addShard("replicaTorneoP2/127.0.0.1:27010")

